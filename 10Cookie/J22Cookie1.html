<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script>
    /* 쿠키 생성 함수 */
    var setCookie = function (name, value, exp) {
      var date = new Date();
      date.setTime(date.getTime() + exp * 24 * 60 * 60 * 1000);

      document.cookie =
        name + "=" + encodeURIComponent(value) +
        ";expires=" + date.toUTCString() +
        ";path=/";
    };

    /* 쿠키 읽기 함수: 쿠키는 ;(세미콜론)으로 구분되므로 1차 split() 한 후 =(이퀄)로
    2차 split() 하여 쿠키 값을 읽을 수 있다 */
    var getCookie = function (name) {
      //1차 split으로 배열 생성
      var values = document.cookie.split(";");

      //향목의 갯수만큼 반복
      for (var i = 0; i < values.length; i++) {
        //2차 split으로 쿠키명과 값을 분리
        var item = values[i].trim();
        var pair = item.split("=");

        if (pair[0] === name) {
          return decodeURIComponent(pair[1]);
        }
      }
      return null;
    };

    /* 쿠키 생성 버튼 */
    function makeCookie() {
      var cName = document.getElementById('cName').value;
      var cValue = document.getElementById('cValue').value;

      setCookie(cName, cValue, 1);
      alert("쿠키가 생성되었습니다.");
    }
    /*Javascript를 통해 생성한 쿠키는 만들어지는 즉시 사용할 수 있다.
    즉 생성한 즉시 값을 읽을 수 있다. 
    단, 개발자도구에서 확인할때는 새로고침 해야 항목을 볼 수 있다.*/

    /* 쿠키 읽기 버튼 */
    function readCookie() {
      var cName = document.getElementById('cName').value;

      var readValue = getCookie(cName);
      if (readValue == null) {
        alert("해당 이름으로 생성된 쿠키가 없습니다.");
      } else {
        alert("쿠키값: " + readValue);
      }
    }

    /* 쿠키 삭제 버튼 */
    function deleteCookie() {
      var cName = document.getElementById('cName').value;

      // 쿠키값은 아무거나 가능, 날짜만 과거로 설정
      setCookie(cName, "", -1);
      alert("쿠키가 삭제되었습니다.");
    }
  </script>
</head>
<body>
  <h2>쿠키 생성 하기</h2>

  <form>
    쿠키명 : <input type="text" id="cName" value="popup1"><br>
    쿠키에 저장할 값 : <input type="text" id="cValue" value="팝업창열기"><br>

    <button type="button" onclick="makeCookie();">쿠키생성</button>
    <button type="button" onclick="readCookie();">쿠키읽기</button>
    <button type="button" onclick="deleteCookie();">쿠키삭제</button>
  </form>
</body>
</html>
