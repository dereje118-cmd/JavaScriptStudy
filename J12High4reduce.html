<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>J12High4reduce.html</title>
</head>
<script>
  /*reduce함수
  - 배열을 순하면서 원소의 값을 하나로 줄여서 반환한다.
  - 즉 반환값이 있으나 배열이 아닌 하나의 단일 결과값만 반환된다.
  - thisArgs 대신 조건값을 사용한다.
  - 초깃값의 유무에 따라서 반복횟수가 달라진다.
  형식] 반환결과 = 원본배열.reduce(
                        콜백함수(이전
  실행과정]
  #배열의 크기가 N이라 가정했을때
  -초깃값이 있다면 N희 반복한다
            previousVal
              1회차 : 초깃값으로 지정
              2회차 : return이 있다면 반환값으로 지정
                      return이 없다면 undefined 지정
            currentVal
                  1회차: 원본배열의 첫번째 값 지정
                  2회자: 두번째 값 지정
    초깃값이 없다면 N-1회 반복한다.
       previousVal
          1회차 : 원본배열의 첫번째 값 지정
          2회차 : 이전회차의 반환값이 지정됨(없다면 undefined)
      currentVal
          1회차:원본배열의 두번째 값 지정
          2회차: 원본배열의 세번째 값 지정
  */
  (function reduceTest1(){
    console.error("reduceTest1() called..기본사용법");
    var oldArray = [0,1,2,3,4];
    oldArray.reduce(function(previousVal, currentVal, index, array){
      console.log(previousVal, currentVal, index);
    });
  })();

  function reduceTest2(){
    console.error("reduceTest2() called..return값 사용하기");
    var oldArray = [0,1,2,3,4];
    var sum = oldArray.reduce(function(previousVal, currentVal){
      console.log(previousVal, currentVal);
      return previousVal + currentVal;
    });
  }

  /*
    형식3]: 초깃값도 있고, 반환값도 있는 형태의 콜백함수 정의*/
  function reduceTest3(){
    console.error("reduceTest3() called..초기값 사용하기");
    var oldArray = [0,1,2,3,4];
    /*조깃값이 있으므로 previous의 첫번째 값은 2가 할당된다.
    원본배열에서 이미 사용돈 값이 없으므로 current에는 원본배열의 첫번째
    요소가 할당된다.*/
    var sum = oldArray.reduce(function(previousVal, currentVal){
      console.log(previousVal, currentVal);
      return previousVal + currentVal;
    }, 2);
    console.log(sum);
  }
  //초깃값과 반환값이 잇는 콜백함수를 통해 중복값 제거하기 
  function reduceTest4(){
    console.error("reduceTest4() called..배열에서 중복값을 제거하는 함수 구현");
    var oldArray = [0,1,2,3,3,3,4,5,5,6,6];
    /*초깃값 숫자형식뿐만 아니라 문자열, 배열, 객체 등 모든 형식을 사용할 수 있다.
    여기에서는 반배열을 초깃값으로 지정하여 prv의 첫번째 값은 []이 된다.
    따라서 curr은 원본배열 전체 요소가 순서대로 할당된다.*/
    var newArray = oldArray.reduce(
      function(previousVal, currentVal){
        /*index()는 배열 내부에 특정 요소가 있는 경우 인덱스를 반환한다.
        없는 경우는 -1를 반환한다. 따라서 배열 내부에 찾는 값이 없는
        경우에만 pre배열에 해당 요소를 추가한다. */
        if(previousVal.indexOf(currentVal)<0){
          previousVal.push(currentVal);
        }
        return previousVal;
      }, []);
      /*
      previousVal: []->[0]->[0,1]->[0,1,2]...
      currentVal: 0,1,2,3,3...
      배열에 3까지 추가되면 
      */
      console.log(newArray);
  }
</script>
<body>
  <h2>고차함수 - reduce()</h2>
  <div>
    <input type="button" onclick="reduceTest1();" value="reduce1">
    <input type="button" onclick="reduceTest2();" value="reduce2">
    <input type="button" onclick="reduceTest3();" value="reduce3">
    <input type="button" onclick="reduceTest4();" value="reduce4">
  </div>
</body>
</html>